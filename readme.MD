# CogSci_ModSignal_Code

This archive contains the code and data used in the article "Cooperation and Deception in the Mod-Signal Game" (Top, Raveenthiran, De Weerd, Verbrugge (2025)).

## Requirements

RStudio     2024.09.0<br>
R                 4.1.2<br>
magrittr    2.0.3<br>
dplyr          1.1.3<br>
ggplot2     3.4.4<br>
stringr       1.5.0<br>
java            11.0.24

## Directory tree

```bash
.
├── readme.MD
├── requirements.txt
├── analysis_code
│   ├── annotation
|   |   ├── 20250409_annotation_Mod_Signal_JDT.xlsx
|   |   ├── 20250414_annotation_Mod_Signal_HdW.xlsx
|   |   └── annotation_template.xlsx
│   ├── circular_histogram
|   |   ├── Circlehistogram.class
|   |   ├── Circlehistogram.java
|   |   ├── circlehistogram_data_all.csv
|   |   └── circlehistogram_data_all_dot_csv_rateplots.png
|   └── statistics_and_data
|       ├── cogsci_modsignal_statistics.Rmd
|       ├── honestytrust.png
|       ├── modsignal_questionnaire_data.csv
|       └── modsignal_trials_data.csv
├── experiment_code
|   ├── agent.js
|   ├── block1.html
|   ├── block1_css.css
|   ├── block2.html
|   ├── block2_css.css
|   ├── block3.html
|   ├── block3_css.css
|   ├── experiment_css.css
|   ├── final_page.html
|   ├── instructions.html
|   ├── instructions_css.css
|   ├── mod.html
|   ├── modgame.css
|   ├── modgame.html
|   ├── questionnaire.html
|   └── trials.html 
└── questionnaires
    ├── general_questionnaire.pdf
    ├── informed_consent.pdf
    ├── questionnaire_block_1.pdf
    ├── questionnaire_block_2.pdf
    └── questionnaire_block_3.pdf
```

## Folder overview and usage
- **readme.MD** - This readme file.
- **requirements.txt** - Requirements for our statistical analysis.
- **analysis_code** - Contains all data and code used for the statistics and figures in our Results Section.
	- **annotation** - Contains the annotation scheme and annotations of searching the questionnaires for mention of competitive terminology.
			- **20250409_annotation_Mod_Signal_JDT.xlsx** - Annotations of first annotator.
			- **20250414_annotation_Mod_Signal_HdW.xlsx** - Annotations of second annotator.
			- **annotation_template.xlsx** - Annotation template.
	- **circular_histogram** - Contains the data and code needed to generate our circular histograms in Figures 2 and 3.
		- **Circlehistogram.class** - Compiled class file corresponding to Circlehistogram.java. Use by using `java Circlehistogram *.csv` in a terminal, where `*` is a data file in the same folder.
		- **Circlehistogram.java** - Java program that generated circular histograms from a provided data file. Compile using `javac Circlehistogram.java` in a terminal.
		- **circlehistogram_data_all.csv** - Data file for generating circular histograms.
		- **circlehistogram_data_all_dot_csv_rateplots.png** - Circular histograms, generated by using `java Circlehistogram circlehistogram_data_all.csv` in a terminal.
	- **statistics_and_data** - Contains the data and code needed for the statistics in our Results section.
		- **cogsci_modsignal_statistics.Rmd** - R Markdown file used for performing all our statistics, as well as creating Figure 4.
		- **honestytrust.png** - Boxplots of honesty and trust, Figure 4.
		- **modsignal_trials_data.csv** - All data of our participants and agent playing the Mod-Signal Game.
		- **modsignal_questionnaire_data.csv** - All questionnaire data that participants filled in after each block of the Mod-Signal Game.
- **experiment_code** - Contains all code used to run the experiment
	- **agent.js** - 
	- **block1.html** - Screen and instructions shown before the start of block 1.
	- **block1_css.css** - Style sheet for block1.html.
	- **block2.html** - Screen and instructions shown before the start of block 2.
	- **block2_css.css** - Style sheet for block2.html.
	- **block3.html** - Screen and instructions shown before the start of block 3.
	- **block3_css.css** - Style sheet for block3.html.
	- **experiment_css.css** - Style sheet used for most .html files.
	- **final_page.html** - Screen shown to participants who have finished the experiment.
	- **instructions.html** - Screen and instructions shown to participants at the start of the experiment.
	- **instructions_css.css** - Style sheet for instructions.html.
	- **mod.html** - Screen where experimenter can initialize the experiment.
	- **modgame.css** - Style sheet for modgame.html.
	- **modgame.html** - Screen shown for main Mod-Signal Game blocks.
	- **questionnaire.html** - Screen telling participants to fill in the questionnaire for block 3, as well as the final questionnaire.
	- **trials.html** - Screen with practice rounds.
- **questionnaires** - Contains the questionnaires and participants' answers
	- **general_questionnaire.pdf** - The general questionnaire that was used at the end of the experiment.
	- **informed_consent.pdf** - Our informed consent form.
	- **questionnaire_block_1.pdf** - Questionnaire that was given at the end of block 1.
	- **questionnaire_block_2.pdf** - Questionnaire that was given at the end of block 2.
	- **questionnaire_block_3.pdf** - Questionnaire that was given at the end of block 3.
	
@media print {
    .page, .page-break { break-after: page; }
}


## Data formatting

### modsignal_trials_data.csv

This is the data of participants and our agent playing the Mod-Signal Game. Each row corresponds to a single decision, of one player, in a round of the Mod-Signal Game. Columns are as follows:

- **game** - Unique identifier for each game. Formatted sA_gBC, where A is the session number (1-7), and B and C are two different player (1-4). Here, 4 is always the agent. sA_g12 and sA_g34 are block 1, sA_g24 and sA_g13 are block 2, and sA_g14 and sA_g23 are block 3. The agent always signalled first in its game. In sA_g12, player 2 signalled first, in sA_g13, player 1 signalled first, and in sA_g23, player 3 signalled first. To map this number to participant number, simply add (A-1)*3. For example, player 2 in s2_g12 is (2-1)*3+2 is participant 5,
- **round** - The number of the current round in the Mod-Signal Game (1-20).
- **player** - The player who played this action. 0 and 1 are human participants, 3 is the agent. In odd rounds, the odd player signals, whereas in even rounds, the even player signals.
- **signal** - The signal that was sent in the current round. Note that here, the signal ranges 0-23. Add 1 to obtain the number that was shown to the participant.
- **action** - The choice of the participant or agent. Again, choices range from 0 to 23.
- **reactionTime** - The time, in milliseconds, between the signal being selected, and an action being selected and confirmed.

### modsignal_questionnaire_data.csv

This is the questionnaire data. Each row corresponds to a participant. Columns are as follows:

- **Participant** - Unique identifier for each participant, formatted as SAPB, where A is the session number, and B is the participant number.
- **P-Beauty** - Value participants answered on the P-Beauty Contest at the end of the experiment, in the range 0-100.
- **B1 Coop** - Participant rating of cooperativeness of the other player on a 5-point Likert scale, in block 1.
- **B1 Competitive** -  Participant rating of competitiveness of the other player on a 5-point Likert scale, in block 1.
- **B1 Competent** -  Participant rating of competence of the other player on a 5-point Likert scale, in block 1.
- **B1 Again?** - Whether the participant wanted to play with the other player again, in block 1. 1 is yes, -1 is no.
- **B2 Coop** - Participant rating of cooperativeness of the other player on a 5-point Likert scale, in block 2.
- **B2 Competitive** - Participant rating of competitiveness of the other player on a 5-point Likert scale, in block 2.
- **B2 Competent** - Participant rating of competence of the other player on a 5-point Likert scale, in block 2.
- **B2 Again?** - Whether the participant wanted to play with the other player again, in block 2. 1 is yes, -1 is no.
- **B3 Coop** - Participant rating of cooperativeness of the other player on a 5-point Likert scale, in block 3.
- **B3 Competitive** - Participant rating of competitiveness of the other player on a 5-point Likert scale, in block 3.
- **B3 Competent** - Participant rating of competence of the other player on a 5-point Likert scale, in block 3.
- **B3 Again?** - Whether the participant wanted to play with the other player again, in block 3. 1 is yes, -1 is no.
- **B1 Human %** - How confident the participant was that the player they played with in block 1 was human, as percentage.
- **B2 Human %** - How confident the participant was that the player they played with in block 2 was human, as percentage. 
- **B3 Human %** - How confident the participant was that the player they played with in block 3 was human, as percentage. 
- **age** - Age in years.
- **sex** - Sex as F or M.

### circlehistogram_data_all.csv
This file is read to generate the circular histogram. It is structured as follows:

- **row 1** - The 24 data points used to generate the leftmost plot, as integers. The first item will be the topmost point in the histogram, and remaining items are plotted clockwise.
- **row 2** - The 24 data points used to generate the center plot, similar to row 1.
- **row 3** - The 24 data points used to generate the rightmost plot, similar to rows 1 and 2.
- **row 4** - The 24 labels to be printed around the leftmost plot, as integers. The first item is printed at the bottom point of the histogram, remaining items are printed counter-clockwise.
- **row 5** - The 24 labels to be printed around the center plot, similar to row 4.
- **row 6** - The 24 labels to be printed around the rightmost plot, similar to rows 4 and 5.
- **row 7** - The three labels to be printed under the leftmost, center, and rightmost plots, respectively. The @ symbol can be used to indicate a newline.

## Running the experiment

The file 'mod.html' is used to run the experiment. When running, in the Game field, you can enter the ids of the 3 games to be played by a player, separated by commas e.g. game1,game2,game3. Make sure that these values are unique and have not been used yet. 

Then in the Player ID field, the ids of the player needs to be entered for each game separated by commas. Here the player ID can be either 0, 1 or 3. If the player ID is 1 this means that the player starts signalling in the first round. If the player ID is 0, the player receives the signal in the first round. Player ID 3 is used when you want to have the implemented agent play, the agent always starts as the signaler in the first round. The agent plays automatically by simulating and does not need any supervision after starting the first block. 

Make sure that only two players join the game and that one player has ID 0 and the other player has ID 1 if it is a human or 3 if it should be the agent. 

In the tables below you can find an example of how I ordered the games and player IDs.
The first table contains which player ids the player should have in each block and the second table contains the game ids for each block, where X is the session number of the experiment.

|  | Block 1 | Block 2 | Block 3 |
| --- | --- | --- | --- |
| Player 1 | 0 | 1 | 0 |
| Player 2 | 1 | 0 | 0 |
| Player 3 | 0 | 0 | 1 |
| Agent | 3 | 3 | 3 |

| Block 1 | Block 2 | Block 3 |
| --- | --- | --- |
| p1vp2: sX_g12 | p1vp3: sX_g13 | p2vp3: sX_g23 |
| p3vagent: sX_g34 | p2vsagent: sX_g24 | p1vagent: sX_g14 |

For example, the input for the Game and Player ID fields for each player and the agent in session 1 of the experiment would be:
 
| | Player 1 | Player 2 | Player 3 | Player 4 (agent) |
| --- | --- | --- | --- | --- |
| Game | s1_g12,s1_g13,s1_g14 | s1_g12,s1_g24,s1_g23 | s1_g34,s1_g13,s1_g23 |  s1_g34,s1_g24,s1_g14 |
| Player ID | 0,1,0 | 1,0,0 | 0,0,1 | 3,3,3 |

After filling in the fields you can press start and follow the instructions to play the game.

## Credit

The original code for the circular histograms originates from the paper 'Theory of mind in the Mod game: An agent-based model of strategic reasoning' (De Weerd, Verbrugge, Verheij, 2014), and was developed by De Weerd. The same code was modified by J.D. Top
for the present paper. 

The original code for the Mod Game comes from the paper 'Socially smart software agents entice people to use higher-order theory of mind in the Mod game.' (Veltman, De Weerd, Verbrugge, 2017). It was modified by J.D. Top and Maxime Bos for the latter's BSc thesis: 'Cooperation and exploitation in a modified Mod
game' at the University of Groningen, where the agent was created as well. It was then further modified to include human-to-human play by Abi Raveenthiran, for his BSc thesis 'Human behaviour Analysis of Human-Human and Human-Agent Interactions in the Mod-Signal Game'.

The code for our statistics also originates from Abi Raveenthiran's BSc thesis, which was adapted by J.D. Top to include some new analyses.

